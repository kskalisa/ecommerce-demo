<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <!-- Bootstrap Icons -->
     
    <link rel="stylesheet" href="/css/modern-header.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <title>E-Commerce </title>
</head>
<body>

<!-- Sidebar Fragment -->
<div th:fragment="sidebar" class="sidebar" id="sidebar">
    <div class="sidebar-title"><i class="fas fa-shopping-bag logo-icon"></i><span class="logo-text">E-Commerce</span></div>
    <ul class="nav flex-column px-2">
        <li class="nav-item">
            <a class="nav-link" th:href="@{/dashboard}">
                <i class="bi bi-grid-fill"></i>Dashboard
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/orders/all}">
                <i class="bi bi-bag-fill"></i>Orders
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/customers}">
                <i class="bi bi-people-fill"></i>Customers
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/categories/All}">
                <i class="bi bi-grid-3x3-gap-fill"></i>Category
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" th:href="@{/products/All}">
                <i class="bi bi-box-seam"></i>Product
            </a>
        </li>
    </ul>

    <div class="bottom-links px-2">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" th:href="@{/settings}">
                    <i class="bi bi-gear-fill"></i>Settings
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link logout-link" href="#" onclick="confirmLogout(event)">
                    <i class="bi bi-box-arrow-right"></i>Logout
                </a>
                <form id="logout-form" th:action="@{/auth/logout}" method="post" style="display: none;">
                    <!-- CSRF token will be automatically added by Thymeleaf if CSRF is enabled -->
                </form>
            </li>
        </ul>
    </div>
</div>

<!-- Sidebar Styles Fragment -->
<style th:fragment="sidebarStyles">
    /* Sidebar Styles */
    .sidebar {
        background: #fff;
        min-height: 100vh;
        border-right: 1.5px solid #e0e0e0;
        width: 220px;
        position: fixed; /* Changed from relative */
        top: 0;           /* Sticks to top */
        left: 0;          /* Sticks to left */
        z-index: 1040;
        transition: left 0.3s, background 0.3s, color 0.3s;
    }
    .sidebar .nav-link {
        color: #222;
        font-weight: 500;
        border-radius: 8px;
        margin: 4px 0;
        padding: 12px 20px;
        display: flex;
        align-items: center;
        transition: background 0.2s, color 0.2s;
        text-decoration: none;
    }
    .sidebar .nav-link.active, .sidebar .nav-link:hover {
        background: #2563eb;
        color: #fff;
    }
    .sidebar .nav-link i {
        margin-right: 12px;
        font-size: 1.2rem;
    }
    .sidebar .sidebar-title {
        font-size: 1.5rem;
        font-weight: bold;
        padding: 32px 20px 24px 20px;
        letter-spacing: 1px;
    }
    .sidebar .bottom-links {
        position: absolute;
        bottom: 32px;
        width: 100%;
    }
    .logout-link:hover {
        background-color: #e74c3c !important;
        color: white !important;
    }

    /* Dark Mode Sidebar */
    .dark-mode .sidebar {
        background: #23272b !important;
        border-right: 1.5px solid #23272b !important;
        color: #e5e7eb !important;
    }
    .dark-mode .sidebar .nav-link {
        color: #e5e7eb !important;
    }
    .dark-mode .sidebar .nav-link.active,
    .dark-mode .sidebar .nav-link:hover {
        background: #2563eb !important;
        color: #fff !important;
    }
    .dark-mode .sidebar .sidebar-title {
        color: #fff !important;
    }

    /* Mobile Responsive */
    @media (max-width: 991.98px) {
        .sidebar {
            position: fixed;
            left: -220px;
            top: 0;
            height: 100vh;
        }
        .sidebar.show {
            left: 0;
        }
    }
    @media (max-width: 575.98px) {
        .sidebar {
            width: 100vw;
            left: -100vw;
        }
        .sidebar.show {
            left: 0;
        }
        .sidebar .sidebar-title {
            padding: 20px 10px 16px 10px;
            font-size: 1.2rem;
        }
    }
</style>

<!-- Sidebar JavaScript Fragment -->
<script th:fragment="sidebarScript">
    // Logout functionality
    function confirmLogout(event) {
        event.preventDefault();

        if (confirm('Are you sure you want to logout?')) {
            document.getElementById('logout-form').submit();
        }
    }
</script>

</body>
</html>